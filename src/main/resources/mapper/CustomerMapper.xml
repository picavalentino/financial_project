<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.team.financial_project.customer.mapper.CustomerMapper">

    <!-- 전체 고객 목록 조회 -->
    <select id="getAllCustomers" resultType="com.team.financial_project.customer.dto.CustomerDTO">
        SELECT cust_id AS custId,
        cust_rrn AS custRrn,
        cust_telno AS custTelno,
        cust_email AS custEmail,
        cust_occp_ty_cd AS custOccpTyCd,
        cust_addr AS custAddr,
        cust_create_at AS custCreateAt,
        cust_update_at AS custUpdateAt,
        cust_state_cd AS custStateCd
        FROM customer
    </select>

    <!-- 고객 ID로 상세 조회 -->
    <select id="getCustomerById" parameterType="String" resultType="com.team.financial_project.customer.dto.CustomerDTO">
        SELECT cust_id AS custId,
        cust_rrn AS custRrn,
        cust_telno AS custTelno,
        cust_email AS custEmail,
        cust_occp_ty_cd AS custOccpTyCd,
        cust_addr AS custAddr,
        cust_create_at AS custCreateAt,
        cust_update_at AS custUpdateAt,
        cust_state_cd AS custStateCd
        FROM customer
        WHERE cust_id = #{custId}
    </select>

    <!-- 고객 추가 -->
    <insert id="insertCustomer" parameterType="com.team.financial_project.customer.dto.CustomerDTO">
        INSERT INTO customer (cust_id, cust_rrn, cust_telno, cust_email, cust_occp_ty_cd, cust_addr, cust_create_at, cust_update_at, cust_state_cd)
        VALUES (#{custId}, #{custRrn}, #{custTelno}, #{custEmail}, #{custOccpTyCd}, #{custAddr}, #{custCreateAt}, #{custUpdateAt}, #{custStateCd})
    </insert>

    <!-- 고객 정보 수정 -->
    <update id="updateCustomer" parameterType="com.team.financial_project.customer.dto.CustomerDTO">
        UPDATE customer
        SET cust_telno = #{custTelno},
        cust_email = #{custEmail},
        cust_occp_ty_cd = #{custOccpTyCd},
        cust_addr = #{custAddr},
        cust_update_at = #{custUpdateAt},
        cust_state_cd = #{custStateCd}
        WHERE cust_id = #{custId}
    </update>

    <!-- 고객 삭제 -->
    <delete id="deleteCustomer" parameterType="String">
        DELETE FROM customer WHERE cust_id = #{custId}
    </delete>
</mapper>
