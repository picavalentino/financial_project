<!DOCTYPE html>
<html xmlns:th="www.thymeleaf.org" xmlns:sec="www.thymeleaf.org/extras/spring-security">

<!-- header라는 이름으로 선언-->
<div th:fragment="header">
    <div class="navbar shadow-sm">
        <div class="container-fluid">
            <div class="d-flex align-items-center">
                <!-- 로고 -->
                <a th:href="@{/main}" class="navbar-brand d-flex align-items-center">
                    <img src="/images/common/logo.png" alt="GS Bank Logo" style="height: 40px;">
                </a>
            </div>

            <div class="d-flex">
                <!-- 북마크 -->
                <div class="bookmark">
                    <a href="#" class="d-flex align-items-center">고객 목록</a>
                </div>
            </div>

            <!-- 로그인 / 로그아웃 -->
            <div class="d-flex log">
                <!--                <a th:href="@{/login}" class="btn" sec:authorize="isAnonymous()">Login</a>-->
                <a th:href="@{/mypage}" class="btn">MyPage</a>
                <a th:href="@{/logout}" class="btn" sec:authorize="isAuthenticated()">Logout</a>
            </div>

            <!-- 토글 버튼 (헤더 위에 고정시키기) -->
            <button class="navbar-toggler d-md-none" type="button" data-bs-toggle="collapse" data-bs-target="#sidebarMenu"
                    aria-controls="sidebarMenu" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
        </div>
    </div>



    <!-- 토글로 표시될 사이드바 -->
    <div class="collapse collapse-top" id="sidebarMenu">
        <div class="p-3 shadow">
            <!-- 사이드바 내용 -->
            <div class="sidebar-toggle">
                <!-- 사이드바 메뉴 -->
                <ul class="nav flex-column">
                    <li class="nav-item">
                        <div class="dropdown">
                            <button class="btn btn-link dropdown-toggle" type="button" id="dropdownMenuButton1"
                                    data-bs-toggle="collapse" data-bs-target="#customerManagement" aria-expanded="false"
                                    aria-controls="customerManagement">
                                고객관리
                            </button>
                            <div class="collapse" id="customerManagement">
                                <ul class="list-unstyled">
                                    <li class="d-flex justify-content-between align-items-center">
                                        <a href="@{/customer/list}" class="nav-link">고객 목록</a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </li>
                    <li class="nav-item">
                        <div class="dropdown">
                            <button class="btn btn-link dropdown-toggle" type="button" id="dropdownMenuButton2"
                                    data-bs-toggle="collapse" data-bs-target="#productManagement" aria-expanded="false"
                                    aria-controls="productManagement">
                                상품 관리
                            </button>
                            <div class="collapse" id="productManagement">
                                <ul class="list-unstyled">
                                    <li class="d-flex justify-content-between align-items-center">
                                        <a href="@{/product/list}" class="nav-link">상품 목록 조회</a>
                                    </li>
                                    <li class="d-flex justify-content-between align-items-center">
                                        <a href="@{/product/insert}" class="nav-link">신규 상품 등록</a>
                                    </li>
                                    <li class="d-flex justify-content-between align-items-center">
                                        <a href="@{/product/sales}" class="nav-link">매출 조회</a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </li>
                    <li class="nav-item">
                        <div class="dropdown">
                            <button class="btn btn-link dropdown-toggle" type="button" id="dropdownMenuButton3"
                                    data-bs-toggle="collapse" data-bs-target="#eventManagement" aria-expanded="false"
                                    aria-controls="eventManagement">
                                활동 관리
                            </button>
                            <div class="collapse" id="eventManagement">
                                <ul class="list-unstyled">
                                    <li class="d-flex justify-content-between align-items-center">
                                        <a href="@{/schedule/personal}" class="nav-link">개인 일정 관리</a>
                                    </li>
                                    <li class="d-flex justify-content-between align-items-center">
                                        <a href="@{/schedule/customer}" class="nav-link">고객 이벤트 관리</a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </li>
                    <li class="nav-item">
                        <div class="dropdown">
                            <button class="btn btn-link dropdown-toggle" type="button" id="dropdownMenuButton4"
                                    data-bs-toggle="collapse" data-bs-target="#promotionManagement"
                                    aria-expanded="false" aria-controls="promotionManagement">
                                프로모션 관리
                            </button>
                            <div class="collapse" id="promotionManagement">
                                <ul class="list-unstyled">
                                    <li class="d-flex justify-content-between align-items-center">
                                        <a href="@{/promotion/list}" class="nav-link">상품 설계 조회</a>
                                    </li>
                                    <li class="d-flex justify-content-between align-items-center">
                                        <a href="@{/promotion/cal}" class="nav-link">금융 계산기</a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </li>
                    <li class="nav-item">
                        <div class="dropdown">
                            <button class="btn btn-link dropdown-toggle" type="button" id="dropdownMenuButton6"
                                    data-bs-toggle="collapse" data-bs-target="#employeeManagement" aria-expanded="false"
                                    aria-controls="employeeManagement">
                                직원 관리
                            </button>
                            <div class="collapse" id="employeeManagement">
                                <ul class="list-unstyled">
                                    <li class="d-flex justify-content-between align-items-center">
                                        <a href="@{/management/list}" class="nav-link">직원 목록</a>
                                    </li>
                                    <li class="d-flex justify-content-between align-items-center">
                                        <a href="@{/management/insert}" class="nav-link">직원 등록</a>
                                    </li>
                                    <li class="d-flex justify-content-between align-items-center">
                                        <a href="@{/management/employees}" class="nav-link">직원 정보 관리</a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </li>
                    <li class="nav-item">
                        <div class="dropdown">
                            <button class="btn btn-link dropdown-toggle" type="button" id="dropdownMenuButton5"
                                    data-bs-toggle="collapse" data-bs-target="#boardManagement" aria-expanded="false"
                                    aria-controls="boardManagement">
                                게시판
                            </button>
                            <div class="collapse" id="boardManagement">
                                <ul class="list-unstyled">
                                    <li class="d-flex justify-content-between align-items-center">
                                        <a href="@{/board/list}" class="nav-link">게시글 목록</a>
                                    </li>
                                    <li class="d-flex justify-content-between align-items-center">
                                        <a href="@{/board/insert}" class="nav-link">게시글 등록</a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </li>
                    <li class="nav-item">
                        <div class="dropdown">
                            <button class="btn btn-link dropdown-toggle" type="button" id="dropdownMenuButton7"
                                    data-bs-toggle="collapse" data-bs-target="#systemManagement" aria-expanded="false"
                                    aria-controls="systemManagement">
                                시스템 관리
                            </button>
                            <div class="collapse" id="systemManagement">
                                <ul class="list-unstyled">
                                    <li class="d-flex justify-content-between align-items-center">
                                        <a href="@{/system/board}" class="nav-link">게시판 관리</a>
                                    </li>
                                    <li class="d-flex justify-content-between align-items-center">
                                        <a href="@{/system/auth}" class="nav-link">권한 관리</a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        // 화면 크기가 변경될 때 이벤트 리스너 추가
        window.addEventListener('resize', function () {
            // 화면의 너비가 768px 이상이면
            if (window.innerWidth >= 768) {
                const collapseElement = document.getElementById('sidebarMenu');
                const bsCollapse = bootstrap.Collapse.getInstance(collapseElement); // Bootstrap Collapse 인스턴스 가져오기

                if (bsCollapse) {
                    bsCollapse.hide(); // collapse를 닫음
                }
            }
        });
    </script>

</div>