<!DOCTYPE html>
<html xmlns:th="www.thymeleaf.org" xmlns:layout="www.ultraq.net.nz/thymeleaf/layout" layout:decorate="~{layout/layout}">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>개인 일정 관리</title>
  <link rel="stylesheet" th:href="@{/css/schedule/personal.css}">
</head>
<!-- 전체 적용될 CSS -->
<th:block layout:fragment="css"></th:block>
<!-- 전체 적용될 스크립트 -->
<th:block layout:fragment="script"></th:block>

<body>
<div layout:fragment="content" class="content">
  <div class="container1">
    <div class="content1">
      <h1>개인 일정 관리</h1>
      <div class="calendar-container">

        <div class="calendar-header">

          <h2><a><button id="btn_left">&lt;</button></a>2024년 11월<a><button
                  id="btn_right">&gt;</button></a></h2>

        </div>


        <table class="calendar-table">
          <thead>
          <tr>
            <th id="sun">일</th>
            <th>월</th>
            <th>화</th>
            <th>수</th>
            <th>목</th>
            <th>금</th>
            <th id="sat">토</th>
          </tr>
          </thead>
          <tbody>
          <tr>
            <td class="calendar-cell"></td>
            <td class="calendar-cell"></td>
            <td class="calendar-cell"></td>
            <td class="calendar-cell"></td>
            <td class="calendar-cell"></td>
            <td class="calendar-cell">1
              <div class="event-bar" data-title="금융프로젝트" data-date="11월 1일 (금요일)" data-time="오전 9:00~11:00" data-location="강남역" data-person="김철수">금융프로젝트</div>
            </td>
            <td class="calendar-cell">2</td>
          </tr>
          <tr>
            <td class="calendar-cell">3</td>
            <td class="calendar-cell">4
              <div class="event-bar">점심 약속</div>
            </td>
            <td class="calendar-cell">5</td>
            <td class="calendar-cell">6
              <div class="event-info">
                <div class="event-title-container">
                  <span class="event-dot-team"></span>
                  <p class="event-title">프로젝트 발표</p>
                </div>
              </div>
            </td>
            <td class="calendar-cell">7</td>
            <td class="calendar-cell">8</td>
            <td class="calendar-cell">9</td>
          </tr>
          <tr>
            <td class="calendar-cell">10</td>
            <td class="calendar-cell">11</td>
            <td class="calendar-cell">12</td>
            <td class="calendar-cell">13</td>
            <td class="calendar-cell">14</td>
            <td class="calendar-cell">15</td>
            <td class="calendar-cell">16</td>
          </tr>
          <tr>
            <td class="calendar-cell">17</td>
            <td class="calendar-cell">18</td>
            <td class="calendar-cell">19</td>
            <td class="calendar-cell">20
              <div class="event-bar multi-day">제주도 여행</div>
            </td>
            <td class="calendar-cell">21
              <div class="event-bar multi-day"></div>
              <div class="event-info">
                <div class="event-title-container">
                  <span class="event-dot-personal"></span>
                  <p class="event-title">제주도</p>
                </div>

              </div>
            </td>
            <td class="calendar-cell">22
              <div class="event-bar multi-day"></div>
              <div class="event-info">
                <div class="event-title-container">
                  <span class="event-dot-personal"></span>
                  <p class="event-title">제주도</p>
                </div>
              </div>
            </td>
            <td class="calendar-cell">23</td>
          </tr>
          <tr>
            <td class="calendar-cell">24</td>
            <td class="calendar-cell">25</td>
            <td class="calendar-cell">26</td>
            <td class="calendar-cell">27</td>
            <td class="calendar-cell">28</td>
            <td class="calendar-cell">29</td>
            <td class="calendar-cell">30</td>
          </tr>
          </tbody>
        </table>

      </div>
    </div>
    <div class="today_task">

      <h3> <img th:src="@{/css/schedule/img/task_img.png}">
        오늘의 할 일</h3>


      <div class="today-tasks">
        <label for="task1"><strong> &middot; 11:30</strong></label>
        <div id="task_text">
          <p> 점심 미팅 </p><input type="checkbox" id="task1" checked>
        </div>
      </div>


    </div>
  </div>
  <div class="schedule_detail">
  <div class="scheduler-container">

    <h1>일정 등록</h1>

    <div class="date-display">
      <button id="prev-day">&lt;</button>
      <span id="current-date">2024.11.20</span>
      <button id="next-day">&gt;</button>
    </div>

    <div class="scheduler">
      <span class="close">&times;</span>
      <div class="row">
        <select class="time-select">
          <!-- Generate time slots dynamically -->
          <!-- 00:00 ~ 23:30 in 30-minute intervals -->
          <option value="00:00">00:00</option>
          <option value="00:30">00:30</option>
          <option value="01:00">01:00</option>
          <option value="01:30">01:30</option>
          <option value="02:00">02:00</option>
          <option value="02:30">02:30</option>
          <option value="03:00">03:00</option>
          <option value="03:30">03:30</option>
          <option value="04:00">04:00</option>
          <option value="04:30">04:30</option>
          <option value="05:00">05:00</option>
          <option value="05:30">05:30</option>
          <option value="06:00">06:00</option>
          <option value="06:30">06:30</option>
          <option value="07:00">07:00</option>
          <option value="07:30">07:30</option>
          <option value="08:00">08:00</option>
          <option value="08:30">08:30</option>
          <option value="09:00">09:00</option>
          <option value="09:30">09:30</option>
          <option value="10:00">10:00</option>
          <option value="10:30">10:30</option>
          <option value="11:00">11:00</option>
          <option value="11:30">11:30</option>
          <option value="12:00">12:00</option>
          <option value="12:30">12:30</option>
          <option value="13:00">13:00</option>
          <option value="13:30">13:30</option>
          <option value="14:00">14:00</option>
          <option value="14:30">14:30</option>
          <option value="15:00">15:00</option>
          <option value="15:30">15:30</option>
          <option value="16:00">16:00</option>
          <option value="16:30">16:30</option>
          <option value="17:00">17:00</option>
          <option value="17:30">17:30</option>
          <option value="18:00">18:00</option>
          <option value="18:30">18:30</option>
          <option value="19:00">19:00</option>
          <option value="19:30">19:30</option>
          <option value="20:00">20:00</option>
          <option value="20:30">20:30</option>
          <option value="21:00">21:00</option>
          <option value="21:30">21:30</option>
          <option value="22:00">22:00</option>
          <option value="22:30">22:30</option>
          <option value="23:00">23:00</option>
          <option value="23:30">23:30</option>
        </select>
        <input type="text" class="task-title" placeholder="Enter title...">
        <input type="text" class="location-input" placeholder="Enter location...">
        <div class="checkboxes">
          <label><input type="checkbox" class="select-checkbox" id="team-checkbox"> 팀  </label>
          <label><input type="checkbox" class="select-checkbox" id="personal-checkbox"> 개인</label>
        </div>
      </div>
      <div class="details">
        <textarea class="details-input" placeholder="Enter detailed information..."></textarea>
      </div>
      <input type="submit" value="등록">
    </div>
  </div>
    <script th:inline="javascript">
      $(document).ready(function () {
        console.log("jQuery가 준비되었습니다.");
      const eventModal = $('#eventModal'); // 모달 창
      const $closeBtn = $('.close'); // 닫기 버튼

      // 이벤트 바 클릭 시 모달 열기
      $('.event-bar').on('click', function () {
        const title = $(this).data('title');
        const date = $(this).data('date');
        const time = $(this).data('time');
        const location = $(this).data('location');
        const person = $(this).data('person');

        // 모달 내용 설정
        $('.event-title').text(title);
        $('.event-time').text(`${date} - ${time}`);
        $('.event-location').text(location);
        $('.event-person').text(person);

        // 모달 열기
        $eventModal.fadeIn();
      });

      // 닫기 버튼 클릭 시 모달 닫기
      $closeBtn.on('click', function () {
        $eventModal.fadeOut();
      });

      // 모달 외부 클릭 시 닫기
      $(window).on('click', function (event) {
        if ($(event.target).is($eventModal)) {
          $eventModal.fadeOut();
        }
      });


        // 모달 관련 요소 가져오기
        const $modal = $('.schedule_detail'); // 모달 창
        const $calendarCells = $('.calendar-cell'); // 날짜 셀
        const $closeBtn = $('.schedule_detail .close'); // 닫기 버튼

        // 날짜 클릭 시 모달 열기
        $calendarCells.on("click", function (event) {
            // 클릭한 위치에 모달 배치
            $modal.fadeIn();
            const clickX = event.pageX; // 클릭한 X 좌표
            const clickY = event.pageY; // 클릭한 Y 좌표

            // 모달 위치 설정
            $modal.css({
                display: "block",
                top: clickY + "px",
                left: clickX + "px",
                position: "absolute",
                transform: "translate(-50%, -50%)"
            });

            // 부드러운 나타나기 효과

        });

        // 닫기 버튼 클릭 시 모달 닫기
        $closeBtn.on("click", function () {
            $modal.fadeOut(); // 모달 숨기기
        });

        // 모달 외부 클릭 시 닫기
        $(window).on("click", function (event) {
            if ($(event.target).hasClass('schedule_detail')) {
                $modal.fadeOut(); // 모달 숨기기
            }
        });

        //체크박스 하나만 선택
         const checkboxes = document.querySelectorAll('.select-checkbox');

      checkboxes.forEach(checkbox => {
        checkbox.addEventListener('change', (e) => {
          if (e.target.checked) {
            checkboxes.forEach(box => {
              if (box !== e.target) {
                box.checked = false;
              }
            });
          }
        });
      });
      });
    </script>
</div>
</div>
</body>

</html>