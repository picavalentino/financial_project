<!DOCTYPE html>
<html xmlns:th="www.thymeleaf.org" xmlns:layout="www.ultraq.net.nz/thymeleaf/layout" layout:decorate="~{layout/layout}">
<!--security 적용 후 아래 코드로 변경해주세요-->
<!--<html xmlns:th="www.thymeleaf.org" xmlns:layout="www.ultraq.net.nz/thymeleaf/layout" layout:decorate="~{layout/layout}" xmlns:sec="www.thymeleaf.org/extras/spring-security">-->

<meta charset="UTF-8">
<head>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.1/font/bootstrap-icons.css">
  <link rel="stylesheet" href="/css/product/common.css">
  <link rel="stylesheet" href="/css/product/product-sales.css">
  <link rel="stylesheet" href="/css/buttons/button.css">
</head>
<title>GS Bank</title>
<!-- 전체 적용될 CSS -->
<th:block layout:fragment="css"></th:block>
<!-- 전체 적용될 스크립트 -->
<th:block layout:fragment="script"></th:block>

<!-- 우리가 작업할 공간 -->
<body>
<div layout:fragment="content" class="content">
  <div class="sub_content">
    <!-- 위치 -->
    <div class="location">
      <a th:href="@{/main}"><i class="bi bi-house-door-fill"></i> Home</a>
      <a th:href="@{/product/list}"> / 상품관리</a>
      <p> / 매출조회 </p>
    </div>
    <!-- 상단 -->
    <div class="top-content">
      <h1 class="title">매출조회</h1>
      <div class="condition-box">
        <form id="search-form" action="/product/sales/search" method="GET">
          <div class="menu-top">
            <div class="condition">
              <label>연도</label>
              <select name="year">
                <option value="">연도 선택</option>
                <option th:each="year : ${#numbers.sequence(2020, T(java.time.Year).now().getValue())}"
                        th:value="${year}" th:text="${year}">
                </option>
              </select>
            </div>
            <div class="condition">
              <label>월</label>
              <select name="month">
                <option value="">월 선택</option>
                <option th:each="month : ${#numbers.sequence(1, 12)}" th:value="${month}" th:text="${month}">
                </option>
              </select>
            </div>
            <div class="condition" id="condition-period">
              <label>기간</label>
              <div style="display: flex; align-items: center;">
                <input name="searchBgnYmd" type="date">
                <span>~</span>
                <input name="searchEndYmd" type="date">
              </div>
            </div>
          </div>
          <div class="menu-bottom">
            <div class="condition">
              <label>상품유형</label>
              <select name="prodCd">
                <option value="">적금/예금/대출</option>
                <option value="1">적금</option>
                <option value="2">예금</option>
                <option value="3">대출</option>
              </select>
            </div>
            <div class="condition">
              <label>상품명</label>
              <input name="prodNm" type="text" placeholder="상품명을 입력하세요">
            </div>
            <div class="btn-wrap">
              <button type="submit" class="btn" id="btn-search">
                <div class="icon-container"><i class="icon bi bi-search"></i></div> 검색
              </button>
              <button type="button" class="btn" id="btn-search-all">
                <div class="icon-container"><i class="icon bi bi-search"></i></div> 전체
              </button>
            </div>
          </div>
        </form>
      </div>
    </div>
    <!-- 하단 매출 리스트 출력 -->
    <div class="bottom-content">
      <div class="btn-wrap" id="btn-bottom-menu">
        <button class="btn" id="btn-print">
          <div class="icon-container"><i class="icon bi bi-printer"></i></div> 인쇄
        </button>
      </div>
      <div class="sales-list">
        <table class="table-sales">
          <thead>
          <tr>
            <th><input type="checkbox" id="checkAll"></th>
            <th>NO.</th>
            <th>상품코드</th>
            <th>상품명</th>
            <th>설계건수</th>
            <th>설계금액</th>
          </tr>
          </thead>
          <tbody>
          <tr>
            <td><input type="checkbox" class="row-checkbox"></td>
            <td>1</td>
            <td>A001</td>
            <td>적금</td>
            <td>10</td>
            <td>10,000,000</td>
          </tr>
          </tbody>
        </table>
      </div>
    </div>
    <!-- 페이지네이션 -->
  </div>
  <script th:inline="javascript">
      $(document).ready(function(){
        // 전체 버튼 클릭
        $(".btn-search-all").on("click", function(e){
            window.location.href = "/product/list";
        });
        // 전체 선택 체크박스 클릭 이벤트
        $("#checkAll").on("click", function () {
           const isChecked = $(this).is(":checked");
           $(".row-checkbox").prop("checked", isChecked);
        });

        // 개별 체크박스 클릭 이벤트로 전체 체크박스 상태 업데이트
        $(".table-product").on("change", ".row-checkbox", function () {
           const total = $(".row-checkbox").length;
           const checked = $(".row-checkbox:checked").length;
          $("#checkAll").prop("checked", total === checked);
        });
      });
  </script>
</div>
</body>
</html>