<!DOCTYPE html>
<html xmlns:th="www.thymeleaf.org" xmlns:layout="www.ultraq.net.nz/thymeleaf/layout" layout:decorate="~{layout/layout}">
<!--security Ï†ÅÏö© ÌõÑ ÏïÑÎûò ÏΩîÎìúÎ°ú Î≥ÄÍ≤ΩÌï¥Ï£ºÏÑ∏Ïöî-->
<!--<html xmlns:th="www.thymeleaf.org" xmlns:layout="www.ultraq.net.nz/thymeleaf/layout" layout:decorate="~{layout/layout}" xmlns:sec="www.thymeleaf.org/extras/spring-security">-->
<head>
    <meta charset="UTF-8">
    <title>GS Bank</title>
    <!-- Ï†ÑÏ≤¥ Ï†ÅÏö©Îê† CSS -->
    <th:block layout:fragment="css"></th:block>
    <!-- Ï†ÑÏ≤¥ Ï†ÅÏö©Îê† Ïä§ÌÅ¨Î¶ΩÌä∏ -->
    <th:block layout:fragment="script"></th:block>
    <!-- ÌéòÏù¥ÏßÄÎ≥Ñ Í≥†Í∞ù Ï°∞Ìöå CSS -->
    <link rel="stylesheet" th:href="@{/css/customer/customerList.css}">
    <link rel="stylesheet" th:href="@{/css/customer/customerListModal.css}">
    <script th:src="@{/js/customer/customerListModal.js}" defer></script>
</head>
<body>
<div layout:fragment="content" class="content">
    <div class="location">
        <a th:href="@{/main}"><i class="bi bi-house-door-fill"></i> Home</a>
        <a href="/customer/list"> / Í≥†Í∞ù Í¥ÄÎ¶¨</a>
        <spapn> / Í≥†Í∞ù Î™©Î°ù</spapn>
    </div>
    <h2 class="title">Í≥†Í∞ù Î™©Î°ù</h2>
    <div class="main-content">
        <section class="customer-query">
            <div class="actions">
                <!-- ÏôºÏ™Ω Î≤ÑÌäº Í∑∏Î£π -->
                <div class="left-actions">
                    <button class="btn-print" onclick="openPrintModal()"><span class="icon">üñ®Ô∏è</span> Ïù∏ÏáÑ</button>
                    <button class="message-button" onclick="openMessageModal()"><span class="icon">‚úâÔ∏è</span> Î©îÏãúÏßÄ Î∞úÏÜ°
                    </button>
                </div>
                <!--       ======================================================================================================         -->
                <!-- Ïò§Î•∏Ï™Ω Î≤ÑÌäº Í∑∏Î£π -->
                <div class="right-actions">
                    <div class="search">
                        <form id="search-form" method="GET" action="/customer/list">
                            <select name="searchType">
                                <option value="" th:selected="${searchType == ''}">Í≤ÄÏÉâ</option>
                                <option value="name" th:selected="${searchType == 'name'}">Í≥†Í∞ùÎ™Ö</option>
                                <option value="email" th:selected="${searchType == 'email'}">Ïù¥Î©îÏùº</option>
                                <option value="manager" th:selected="${searchType == 'manager'}">Îã¥ÎãπÏûê</option>
                            </select>
                            <input type="text" name="keyword" placeholder="Í≤ÄÏÉâÏñ¥Î•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî"  th:value="${keyword != null ? keyword : ''}" >
                            <button type="submit" class="search-button">
                                <span class="icon">üîç</span> Í≤ÄÏÉâ
                            </button>
                        </form>
                    </div>
                    <!-- Îì±Î°ù Î≤ÑÌäº -->
                    <button type="button" class="insert-button">
                        <span class="icon">‚ûï</span> Îì±Î°ù
                    </button>
                </div>
            </div>
            <!--       ======================================================================================================         -->
            <table class="listTable">
                <thead>
                <tr>
                    <th>
                        <input type="checkbox"
                               name="selectAllCustomers"
                               value="selectAllCustomers"
                               onclick="selectAll(this)">
                    </th>
                    <th>Í≥†Í∞ùID</th>
                    <th>Í≥†Í∞ùÎ™Ö</th>
                    <th>ÏÉùÎÖÑÏõîÏùº</th>
                    <th>Ï†ÑÌôîÎ≤àÌò∏</th>
                    <th class="emailTh">Email</th>
                    <th>Îã¥ÎãπÏûê</th>
                    <th>
                        <form id="filterForm" th:action="@{/customer/list}" method="get">
                            <select name="status" onchange="document.getElementById('filterForm').submit();">
                                <option value="" th:selected="${status == null || status == ''}">Î™®Îì† ÏÉÅÌÉú</option>
                                <option value="1" th:selected="${status == '1'}">ACTIVE</option>
                                <option value="0" th:selected="${status == '0'}">INACTIVE</option>
                            </select>
                            <input type="hidden" name="searchType" th:value="${searchType}">
                            <input type="hidden" name="keyword" th:value="${keyword}">
                        </form>
                    </th>
                    <th>Îì±Î°ùÏùº</th>
                </tr>
                </thead>
                <!--       ======================================================================================================         -->
                <tbody>
                <tr th:each="customer : ${customers}"
                    th:attr="data-id=${customer.custId},
                             data-custid=${customer.custId},
                             data-custnm=${customer.custNm},
                             data-birthdate=${customer.birthDate},
                             data-custtelno=${customer.custTelno},
                             data-custemail=${customer.custEmail},
                             data-custcreateat=${#temporals.format(customer.custCreateAt, 'yyyy-MM-dd HH:mm')},
                             data-custstatecd=${customer.custStateCd},
                             data-usersname=${customer.users != null && customer.users.user_name != null ? customer.users.user_name : 'ÏóÜÏùå'}">
                    <td>
                        <input type="checkbox"
                               name="selectedCustomers"
                               class="customer-checkbox"
                               th:value="${customer.custId}"
                               onclick="checkSelected()">
                    </td>
                    <td th:text="${customer.custId}"></td>
                    <td>
                        <a th:href="@{'/customer/detail/' + ${customer.custId}}" th:text="${customer.custNm}">Ïù¥Î¶Ñ</a>
                    </td>
                    <td th:text="${customer.birthDate}">19940926</td>
                    <td th:text="${customer.custTelno}">010-1111-1111</td>
                    <td th:text="${customer.custEmail}">aaa@naver.com</td>
                    <td th:text="${customer.users != null && customer.users.user_name != null ? customer.users.user_name : 'ÏóÜÏùå'}">
                        ÍπÄÏÇ¨Ïõê
                    </td>
                    <td th:text="${customer.custStateCd}"><span class="status active">ÏÉÅÌÉú</span></td>
                    <td th:text="${#temporals.format(customer.custCreateAt, 'yyyy-MM-dd HH:mm')}">2024-11-18</td>
                </tr>
                </tbody>
            </table>
            <!-- ======================================================================================================  -->
            <div class="pagination-container">
                <div class="pagination">
                    <!-- Ïù¥Ï†Ñ ÌéòÏù¥ÏßÄ ÎßÅÌÅ¨ -->
                    <a th:href="@{'?page=' + (${currentPage - 1})
                        + '&pageSize=' + ${pageSize}
                        + '&searchType=' + ${searchType != null ? searchType : ''}
                        + '&keyword=' + ${keyword != null ? keyword : ''}
                        + '&status=' + ${status != null ? status : ''}}"
                                       th:if="${currentPage > 1}">&lt;</a>

                                    <!-- ÌéòÏù¥ÏßÄ Î≤àÌò∏ ÎßÅÌÅ¨Îì§ -->
                                    <span th:each="i : ${#numbers.sequence(1, totalPages)}">
                        <a th:href="@{'?page=' + ${i}
                            + '&pageSize=' + ${pageSize}
                            + '&searchType=' + ${searchType != null ? searchType : ''}
                            + '&keyword=' + ${keyword != null ? keyword : ''}
                            + '&status=' + ${status != null ? status : ''}}"
                           th:text="${i}"
                           th:classappend="${currentPage == i} ? 'active' : ''"></a>
                    </span>

                                    <!-- Îã§Ïùå ÌéòÏù¥ÏßÄ ÎßÅÌÅ¨ -->
                                    <a th:href="@{'?page=' + (${currentPage + 1})
                        + '&pageSize=' + ${pageSize}
                        + '&searchType=' + ${searchType != null ? searchType : ''}
                        + '&keyword=' + ${keyword != null ? keyword : ''}
                        + '&status=' + ${status != null ? status : ''}}"
                       th:if="${currentPage < totalPages}">&gt;</a>
                </div>
        </section>
    </div>
    <!-- ======================================================================================================================== -->
    <!--Î™®Îã¨ Ïù¥Îèô-->
    <div th:replace="~{customer/customerListModal :: customerPrintModal}"></div>
    <div th:replace="~{customer/customerListModal :: customerMessageModal}"></div>
    <div th:replace="~{customer/customerListModal :: customerInsertModal}"></div>
</div>
</body>
</html>